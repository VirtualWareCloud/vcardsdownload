<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual Connect Profile Card</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: url('VConnect_BNGK.png') no-repeat center center fixed;
            background-size: cover;
        }
        .profile-card {
            max-width: 400px;
            margin: 50px auto;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
            padding: 20px;
        }
        .profile-image img {
            width: 100px;
            border-radius: 50%;
            margin-bottom: 20px;
        }
        .buttons a, .buttons button {
            display: block;
            margin: 10px 0;
            padding: 10px 15px;
            text-decoration: none;
            color: white;
            border-radius: 5px;
            border: none;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .android-button { background: #34A853; }
        .ios-button { background: #007AFF; }
        .whatsapp-button { background: #25D366; }
        .email-button { background: #DD4B39; }
        .create-button { background: #ff5722; }
        .google-login { background: #4285F4; }
    </style>
</head>
<body>
    <!-- Profile Card -->
    <div class="profile-card">
        <div class="profile-image">
            <img src="profile.png" alt="Profile Image">
        </div>
        <h2>Thabo Phaahla</h2>
        <p>Cloud Partner, VirtualWareCloud</p>
        <div class="buttons">
            <a href="https://github.com/VirtualWareCloud/vcardsdownload/raw/main/Thabo_Phaahla_Android.vcf" class="android-button" download>
                Save Android Contact Card
            </a>
            <a href="https://github.com/VirtualWareCloud/vcardsdownload/raw/main/Thabo_Phaahla_iOS.vcf" class="ios-button" download>
                Save iPhone Contact Card
            </a>
            <a href="https://wa.me/27820412395" class="whatsapp-button" target="_blank">
                WhatsApp Me
            </a>
            <a href="mailto:thabo.phaahla@virtualwarecloud.com" class="email-button">
                Email Me
            </a>
            <button class="google-login" id="googleLoginButton">Login with Google</button>
            <button class="create-button" id="createProfileButton">Create My Profile</button>
        </div>
    </div>

    <!-- Profile Creation Form -->
    <div class="form-container" id="formScreen" style="display: none;">
        <h3>Create Your Profile Card</h3>
        <form id="profileForm">
            <label for="profileType">Choose Profile Type:</label>
            <select id="profileType" name="profileType" required>
                <option value="individual">Individual</option>
                <option value="company">Company</option>
            </select>
            <label for="name">Name/Company Name:</label>
            <input type="text" id="name" name="name" required>
            <label for="headshotOrLogo">Upload Headshot/Logo:</label>
            <input type="file" id="headshotOrLogo" name="headshotOrLogo" accept="image/*" required>
            <label for="contact">Contact Information:</label>
            <input type="text" id="contact" name="contact" placeholder="Phone, Email, etc." required>
            <label for="description">Description:</label>
            <input type="text" id="description" name="description" placeholder="Short description (e.g., Title, Company)">
            <button type="submit">Save Profile</button>
        </form>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-firestore.js"></script>
    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDKi3vCm4lWR6G9-GQhNjkS0fJZKqCocgE",
            authDomain: "virtual-connect-ca062.firebaseapp.com",
            projectId: "virtual-connect-ca062",
            storageBucket: "virtual-connect-ca062.appspot.com",
            messagingSenderId: "995919061239",
            appId: "1:995919061239:web:b5a74e4264acf34a0233f2"
        };

        const app = firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Login with Google
        document.getElementById("googleLoginButton").addEventListener("click", async () => {
            const provider = new firebase.auth.GoogleAuthProvider();
            try {
                const result = await auth.signInWithPopup(provider);
                const user = result.user;

                // Check if the user already has a profile
                const profileSnapshot = await db.collection("profiles").where("email", "==", user.email).get();
                if (!profileSnapshot.empty) {
                    alert(`Welcome back, ${user.displayName}`);
                } else {
                    alert("No profile found. Please create one by clicking 'Create My Profile'.");
                }
            } catch (error) {
                alert("Login failed. Try again.");
                console.error(error);
            }
        });

        // Show Profile Creation Form
        document.getElementById("createProfileButton").addEventListener("click", () => {
            document.getElementById("formScreen").style.display = "block";
        });
    </script>
</body>
</html>
